-- 修复版：中英文黑白脚本加载器（带语言选择）
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- 显示语言选择界面
local function showLanguageSelector()
    -- 创建UI容器
    local uiContainer = Instance.new("ScreenGui")
    uiContainer.Name = "LanguageSelector"
    uiContainer.Parent = playerGui
    uiContainer.ResetOnSpawn = false

    -- 主面板
    local mainPanel = Instance.new("Frame")
    mainPanel.Size = UDim2.new(0, 300, 0, 180)
    mainPanel.Position = UDim2.new(0.5, -150, 0.5, -90)
    mainPanel.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    mainPanel.BorderColor3 = Color3.fromRGB(200, 200, 200)
    mainPanel.BorderSizePixel = 1
    mainPanel.Active = true
    mainPanel.Parent = uiContainer

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = mainPanel

    -- 标题
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 30)
    title.Position = UDim2.new(0, 0, 0, 20)
    title.BackgroundTransparency = 1
    title.Text = "Select Language / 选择语言"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 16
    title.Font = Enum.Font.SourceSansBold
    title.TextXAlignment = Enum.TextXAlignment.Center
    title.Parent = mainPanel

    -- 创建按钮函数
    local function createButton(name, text, yPos, callback)
        local button = Instance.new("TextButton")
        button.Name = name
        button.Size = UDim2.new(0.8, 0, 0, 40)
        button.Position = UDim2.new(0.1, 0, 0, yPos)
        button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        button.Text = text
        button.TextColor3 = Color3.fromRGB(220, 220, 220)
        button.TextSize = 14
        button.Font = Enum.Font.SourceSansBold
        button.Parent = mainPanel

        -- 悬停效果
        button.MouseEnter:Connect(function()
            button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            button.TextColor3 = Color3.fromRGB(255, 255, 255)
        end)

        button.MouseLeave:Connect(function()
            button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            button.TextColor3 = Color3.fromRGB(220, 220, 220)
        end)

        -- 点击事件
        button.MouseButton1Click:Connect(callback)
        return button
    end

    -- 中文按钮（加载中文脚本）
    createButton("ChineseButton", "中文脚本", 70, function()
        uiContainer:Destroy()
        StarterGui:SetCore("SendNotification", {
            Title = "加载中",
            Text = "正在加载中文黑白脚本...",
            Duration = 10
        })
        
        -- 中文脚本加载代码
        local success, err = pcall(function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/tfcygvunbind/Apple/e36cc5018115776a016f0f0d45186f0685e9dd63/%E9%BB%91%E7%99%BD%E8%84%9A%E6%9C%AC%EF%BC%88%E4%B8%AD%E6%96%87%EF%BC%89'))()
        end)
        
        if not success then
            StarterGui:SetCore("SendNotification", {
                Title = "加载失败",
                Text = "中文脚本加载失败: " .. err,
                Duration = 10
            })
        end
    end)

    -- 英文按钮（加载英文脚本）
    createButton("EnglishButton", "English Script", 120, function()
        uiContainer:Destroy()
        StarterGui:SetCore("SendNotification", {
            Title = "Loading",
            Text = "Loading English Black & White Script...",
            Duration = 10
        })
        
        -- 英文脚本加载代码
        local success, err = pcall(function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/tfcygvunbind/Apple/e36cc5018115776a016f0f0d45186f0685e9dd63/%E9%BB%91%E7%99%BD%E8%84%9A%E6%9C%AC%EF%BC%88%E8%8B%B1%E6%96%87%EF%BC%89'))()
        end)
        
        if not success then
            StarterGui:SetCore("SendNotification", {
                Title = "Load Failed",
                Text = "English script load failed: " .. err,
                Duration = 10
            })
        end
    end)
end

-- 启动语言选择界面
showLanguageSelector()
